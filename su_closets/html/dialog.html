<!DOCTYPE html>
<html>
<head>
  <link href="vendor/Semantic-UI/semantic.min.css" rel="stylesheet">
  <script src="vendor/jquery.js"></script>
  <script src="vendor/Semantic-UI/semantic.min.js"></script>
  <script src="vendor/vue.js"></script>
</head>
<body>
  <div id="app">
    <template v-if="closet">
    <form class="ui form">
      <div class="ui padded celled grid">
        <div class="centered column row">
          <h1 class="ui dividing header">Build Closet</h1>
        </div>

        <div class="eight wide column">
          <div class="ui middle aligned padded centered grid">
            <div class="centered column row">
              <h2 class="ui dividing header">Walls</h2>
              <div class="divider"></div>
            </div>

            <div class="row">
              <div class="left aligned four wide column">
                <div class="field">
                  <label>Name</label>
                  <input placeholder="Name"
                          v-model="closet.name">
                </div>
              </div>
            </div>

            <div class="row">
              <div class="left aligned four wide column">
                <div class="field">
                  <label>Width</label>
                  <input type="number" placeholder="Width"
                          v-model.number="closet.width">
                </div>
              </div>
            </div>

            <div class="left aligned three wide column">
              <div class="field">
                <label>Left Depth</label>
                <input type="number" placeholder="Depth"
                          v-model.number="closet.depthLeft">
              </div>
            </div>

            <div class="ten wide column">
              <img src="closetWalls.png" width="100%" />
            </div>

            <div class="left aligned three wide column">
              <div class="field">
                  <label>Right Depth</label>
                  <input type="number" placeholder="Depth"
                          v-model.number="closet.depthRight">
              </div>
            </div>

            <div class="row">
              <div class="left aligned four wide column">
                <div class="field">
                  <label>Wall Height</label>
                  <input type="number" placeholder="Width"
                          v-model.number="closet.wallHeight">
                </div>
              </div>
            </div>
          </div>

        </div>

        <div class="eight wide column">
          <div class="ui padded grid">
            <div class="centered column row">
              <h2 class="ui dividing header">Closet Details</h2>
            </div>

            <div class="two wide column">
              <div class="row">
                <h4 class="ui header left floated">Left Wall</h4>
                <button class="ui mini right floated icon button">
                  <i class="plus icon" v-on:click="addLeft"></i>
                </button>
              </div>

              <template v-for="(l, index) in left">
                <div class="column">
                  <select class="ui dropdown" v-model="l.type">
                    <option value="">-</option>
                    <option v-for="type in types" v-bind:value="type.value">
                      {{ type.text }}
                    </option>
                  </select>
                </div>
                <div class="column">
                  <select class="ui dropdown" v-model="l.size">
                    <option value="">-</option>
                    <option v-for="size in sizes" v-bind:value="size.value">
                      {{ size.text }}
                    </option>
                  </select>
                </div>
              </template>
            </div>

            <div class="two wide column">
              <div class="row">
                <h4 class="ui header left floated">Center Wall</h4>
                <button class="ui mini right floated icon button">
                  <i class="plus icon" v-on:click="add"></i>
                </button>
              </div>
              <template v-for="(input, index) in centerClosets">
                <div class="column">
                  <select class="ui dropdown" v-model="center.type[index]">
                    <option value="">-</option>
                    <option v-for="type in types" v-bind:value="type.value">
                      {{ type.text }}
                    </option>
                  </select>
                </div>
                <div class="column">
                  <select class="ui dropdown" v-model="center.size[index]">
                    <option value="">-</option>
                    <option v-for="size in sizes" v-bind:value="size.value">
                      {{ size.text }}
                    </option>
                  </select>
                </div>
              </template>
            </div>

            <div class="two wide column">
              <div class="row">
                <h4 class="ui header left floated">Right Wall</h4>
                <button class="ui mini right floated icon button">
                  <i class="plus icon" v-on:click="add"></i>
                </button>
              </div>

              <template v-for="(input, index) in rightClosets">
                <div class="column">
                  <select class="ui dropdown" v-model="right.type[index]">
                    <option value="">-</option>
                    <option v-for="type in types" v-bind:value="type.value">
                      {{ type.text }}
                    </option>
                  </select>
                </div>
                <div class="column">
                  <select class="ui dropdown" v-model="right.size[index]">
                    <option value="">-</option>
                    <option v-for="size in sizes" v-bind:value="size.value">
                      {{ size.text }}
                    </option>
                  </select>
                </div>
              </template>
            </div>

            <div class="two column row">
              <div class="column">
                <div class="fluid field">
                  <label>Height</label>
                  <input type="number" placeholder="Height"
                          v-model.number="closet.height">
                </div>
              </div>

              <div class="column">
                <div class="field">
                  <label>Floor Mount</label>
                  <div class="ui toggle checkbox" style="margin-top: 0.5em;">
                    <input type="checkbox" v-model="closet.floor">
                    <label></label>
                  </div>
                </div>
              </div>
            </div>

          </div>
        </div>

      </div>

      <div style="padding: 1em;">
        <button class="ui primary button" v-on:click="build">Build</button>
        <button class="ui button" v-on:click="cancel">Cancel</button>
      </div>
    </form>
    </template>
    <template v-else>
      <h2>Error loading data</h2>
    </template>
  </div><!-- app -->
  <script>
    var app = new Vue({
      el: '#app',
      data: {
        closet: null,
        types:  null,
        sizes:  null,
        left:   null,
        center: null,
        centerClosets: [],
        rightClosets: [],
        right:  null
      },
      methods: {
        build: function() {
          sketchup.build(this.closet, this.left, this.center, this.right);
        },
        cancel: function() {
          sketchup.cancel();
        },
        addLeft: function(e) {
          console.log(e);
          e.preventDefault();
          console.log('added Left');
          this.left.push({type: 'LH', size: 'Equal'});
        },
        add: function(e) {
          console.log(e);
          e.preventDefault();
          console.log('added');
          this.centerClosets.push({val: 'value'});
        },
      },
      mounted: function() {
        sketchup.ready();
      },
    });
    function updateCloset(closet, types, sizes, left, center, right) {
      app.closet  = closet;
      app.types   = types;
      app.sizes   = sizes;
      app.left    = left;
      app.center  = center;
      app.right   = right;
      app.centerClosets = [];
    }
  </script>
</body>
</html>
